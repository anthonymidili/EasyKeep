<% provide(:title, @company.name) %>

<div class="row">
  <div class="small-12 columns">
    <h1><%= @company.name %></h1>

    <ul class="small-text no_bullets">
      <li><label><b>Owner:</b> <%= @company.owner.name %></label></li>
      <li><label><b>Address: </b><%= current_company.full_address %></label></li>
      <li><label><b>Phone: </b><%= current_company.phone %></label></li>
      <% if current_company.fax.present? %>
        <li><label><b>Fax: </b><%= current_company.fax %></label></li>
      <% end %>
      <li><label><b>Email: </b><%= current_company.owner.email %></label></li>
    </ul>

    <ul class="inline-list">
      <% if current_user.is_owner? %>
        <li><%= link_to 'Edit Company', edit_company_path, class: 'small button radius' %></li>
        <li>
          <%= link_to 'Destroy Company', current_user.company,
                      class: 'small alert button radius',
                      method: :delete,
                      confirm: 'Are you sure? This will permanently DELETE your COMPANY information and all ACCOUNTS, CUSTOMERS, SERVICES, INVOICES, and PAYMENTS attached to your COMPANY!' %>
        </li>
        <li>
          <%= link_to 'Invite New Admin', new_user_invitation_path, class: 'small button radius' %>
        </li>
      <% end %>
      <li><%= link_to 'Accounts Listing', accounts_path, class: 'small button radius' %></li>
    </ul>

    <% if @company.by_admin.count > 1 %>
      <h3>Admins</h3>

      <Table>
        <thead>
        <tr>
          <th>name</th>
          <th>Email</th>
          <% if current_user.is_owner? %>
            <th>Delete</th>
          <% end %>
        </tr>
        </thead>

        <tbody>
        <% @company.by_admin.each do |user| %>
          <% unless user.is_owner? %>
            <tr>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <% if current_user.is_owner? %>
                <td class="center_cell">
                  <%= link_to delete_user_company_path(user), method: :delete, confirm: 'Are you sure? This will permanently DELETE your Admin and all there information'  do %>
                    <i class="general fi-x"></i>
                  <% end %>
                </td>
              <% end %>
            </tr>
          <% end %>
        <% end %>
        </tbody>
      </Table>
    <% end %>
  </div>

  <div class="small-12 columns">
    <h3>Roles Explanation</h3>

    <h5>Owner:</h5>
    <p>
      An owner is the user who created the company on this site. The owner has full access to all the features of
      the site. There can only be one owner role in a company. The owner is the only user that can edit, destroy,
      or create a company and invite users to become an admin of the accounts.
    </p>

    <h5>Admin:</h5>
    <p>
      Consider an admin as a partner or supervisor over the company's accounts. An admin can not have an account
      with the company. If you have an admin that is also a customer the admin will need a separate email address
      for both there admin and customer roles.
    </p>

    <h5>Customer:</h5>
    <p>
      A customer only has access to there own account information. Such as viewing there service, invoice, and
      payment history. Customers can also edit there contact information so your records are always up do date.
    </p>
  </div>

  <div class="small-12 columns">
    <h3>Role Permissions</h3>
    <p>
      Owner = O, Admin = A, Customer = C
    </p>

    <table>
      <thead>
      <tr>
        <th>Permission</th>
        <th>view</th>
        <th>Create</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
      </thead>

      <tbody>
      <tr>
        <td>Personal information</td>
        <td>O, A, C</td>
        <td>O, A</td>
        <td>O, A, C</td>
        <td>O</td>
      </tr>
      <tr>
        <td>Personal account</td>
        <td>C</td>
        <td></td>
        <td>C</td>
        <td></td>
      </tr>
      <tr>
        <td>Admin users</td>
        <td>O, A</td>
        <td>O</td>
        <td></td>
        <td>O</td>
      </tr>
      <tr>
        <td>Company</td>
        <td>O, A</td>
        <td>O</td>
        <td>O</td>
        <td>O</td>
      </tr>
      <tr>
        <td>All accounts</td>
        <td>O, A</td>
        <td>O, A</td>
        <td>O, A</td>
        <td>O</td>
      </tr>
      <tr>
        <td>Service history</td>
        <td>O, A, C</td>
        <td>O, A</td>
        <td>O, A</td>
        <td>O, A</td>
      </tr>
      <tr>
        <td>Invoice history</td>
        <td>O, A, C</td>
        <td>O, A</td>
        <td>O, A</td>
        <td>O, A</td>
      </tr>
      <tr>
        <td>Payment history</td>
        <td>O, A, C</td>
        <td>O, A</td>
        <td>O, A</td>
        <td>O, A</td>
      </tr>
      <tr>
        <td>Repots</td>
        <td>O, A</td>
        <td></td>
        <td>O, A</td>
        <td></td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
